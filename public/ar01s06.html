<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>step 5 : save record when enter is hit</title><link rel="stylesheet" href="stylesheets/handbookish.css" type="text/css" /><meta name="generator" content="DocBook XSL Stylesheets V1.74.1" /><link rel="home" href="index.html" title="backbone todos app in steps" /><link rel="up" href="index.html" title="backbone todos app in steps" /><link rel="prev" href="ar01s05.html" title="step 4 : capture event when enter is hit" /><link rel="next" href="ar01s07.html" title="step 6 : add backbone-localstorage" /></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">step 5 : save record when enter is hit</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ar01s05.html">Prev</a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="ar01s07.html">Next</a></td></tr></table><hr /></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="_step_5_save_record_when_enter_is_hit"></a>step 5 : save record when enter is hit</h2></div></div></div><p>When user hits enter then save the record.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="_code_diff_4"></a>Code diff</h3></div></div></div><p><a class="ulink" href="http://bit.ly/pWYx9c" target="_top">http://bit.ly/pWYx9c</a></p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="_explanation_3"></a>Explanation</h3></div></div></div><p>When a user hits enter after entering a todo item then that todo item needs to be stored. Here that todo item is acting like a model. So this is a good item to create that model and then we will be able to save that model easily. A collection is nothing else but a collection of models.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="_model_code"></a>model code</h3></div></div></div><p>Below code is creating a model named <span class="emphasis"><em>Todo</em></span> .</p><pre class="programlisting">window.Todo = Backbone.Model.extend({
  defaults: {
    content: "empty todo ..."
  },
  initialize: function(){
    if (!this.get('content')){
      this.set({"content": this.defaults.content});
    }
  }
});</pre></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="_collection_code"></a>collection code</h3></div></div></div><p>Here is collection code.</p><pre class="programlisting">window.TodoList = Backbone.Collection.extend({
  model: Todo
});
window.Todos = new TodoList;</pre><p>After this code <code class="literal">Todos</code> will refer to the collection. A backbone collection has certain properties. One of them is method called <a class="ulink" href="http://documentcloud.github.com/backbone/#Collection-create" target="_top">create</a> . In order for <code class="literal">create</code> to work collection needs to know which model to work with. Hence the attribute <span class="emphasis"><em>model</em></span> . If creation of the model is successful then that newly created model will be added to the collection.</p><p>If you run the code at this point of time you will get following error</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="_error"></a>Error</h3></div></div></div><pre class="programlisting">Uncaught Error: A "url" property of function must be specified</pre><p>We are getting that error because when model is saved then backbone invokes <a class="ulink" href="http://documentcloud.github.com/backbone/#Sync" target="_top">Backbone.Sync</a> which attempts to save the record on the server. Since we have not specified how the model should be saved we are getting the error.</p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ar01s05.html">Prev</a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="ar01s07.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">step 4 : capture event when enter is hit </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> step 6 : add backbone-localstorage</td></tr></table></div></body></html>
